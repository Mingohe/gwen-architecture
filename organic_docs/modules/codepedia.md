# 代码文档系统模块 - 业务概述

> **返回**: [文档首页](../../README.md)  
> **前端文档**: [代码文档系统模块 - 前端文档](../frontend/codepedia.md)  
> **后端文档**: [代码文档系统模块 - 后端文档](../backend/codepedia.md)

## 目录

- [1. 模块概述](#1-模块概述)
- [2. 核心业务概念](#2-核心业务概念)
- [3. 业务流程](#3-业务流程)
- [4. 业务规则](#4-业务规则)
- [5. 模块关联](#5-模块关联)
- [6. 详细文档链接](#6-详细文档链接)

---

## 1. 模块概述

### 1.1 模块定位

代码文档系统（Codepedia）模块是GWEN系统的代码知识管理模块，支持代码注释、需求提交、文档管理和投票系统，用于管理和沉淀代码知识。

### 1.2 核心业务功能

- **代码文档管理**: 创建和管理代码文档，记录代码说明
- **需求提交流程**: 通过Wiki任务提交代码需求
- **投票机制**: 通过投票决定代码文档和需求的优先级
- **Wiki任务关联**: 与任务系统关联，将需求转化为任务

### 1.3 业务价值

- **知识沉淀**: 通过代码文档沉淀代码知识
- **需求管理**: 通过Wiki任务管理代码需求
- **民主决策**: 通过投票机制实现需求优先级决策
- **任务转化**: 通过Wiki任务关联实现需求到任务的转化

---

## 2. 核心业务概念

### 2.1 Wiki任务

Wiki任务用于管理代码需求和文档：

- **需求提交**: 通过Wiki任务提交代码需求
- **文档关联**: Wiki任务可以关联代码文档
- **任务转化**: Wiki任务可以转化为系统任务

### 2.2 投票类型

- **赞成** (0): 支持该Wiki任务或代码文档
- **反对** (1): 反对该Wiki任务或代码文档

### 2.3 代码文档

代码文档用于记录代码说明：

- **文件路径**: 文档关联的代码文件路径
- **文档内容**: 代码的详细说明和注释
- **Wiki关联**: 文档关联到Wiki任务

---

## 3. 业务流程

### 3.1 代码文档创建流程

```
1. 用户创建代码文档
   ↓
2. 选择Wiki任务（可选）
   ↓
3. 填写文档信息
   - 文件路径
   - 文档内容
   ↓
4. 保存文档
   ↓
5. 文档出现在文档列表中
```

### 3.2 需求提交流程

```
1. 用户创建Wiki任务
   ↓
2. 填写需求信息
   - 需求描述
   - 相关代码文件
   ↓
3. 提交需求
   ↓
4. 其他用户投票
   ↓
5. 根据投票结果决定优先级
   ↓
6. 高优先级需求转化为任务
```

### 3.3 投票流程

```
1. 用户查看Wiki任务或代码文档
   ↓
2. 选择投票类型（赞成/反对）
   ↓
3. 提交投票
   ↓
4. 更新投票统计
   ↓
5. 根据投票结果调整优先级
```

### 3.4 Wiki任务转化流程

```
1. Wiki任务获得足够投票
   ↓
2. 管理员或系统自动创建任务
   ↓
3. 任务关联到Wiki任务
   ↓
4. Wiki任务状态更新
   ↓
5. 任务进入任务管理流程
```

---

## 4. 业务规则

### 4.1 代码文档规则

1. **文件路径必填**: 文档必须关联代码文件路径
2. **内容验证**: 文档内容不能为空
3. **Wiki关联**: 文档可以关联到Wiki任务
4. **更新权限**: 只有文档创建者可以更新文档

### 4.2 Wiki任务规则

1. **需求描述**: Wiki任务必须包含需求描述
2. **投票机制**: Wiki任务支持投票决定优先级
3. **任务转化**: 高优先级Wiki任务可以转化为任务
4. **状态管理**: Wiki任务状态必须按照预定义流程流转

### 4.3 投票规则

1. **一人一票**: 每个用户对同一个Wiki任务只能投一票
2. **投票类型**: 投票类型为赞成或反对
3. **投票统计**: 统计赞成和反对票数
4. **投票结果**: 根据投票结果决定优先级

### 4.4 任务转化规则

1. **转化条件**: Wiki任务需要满足特定条件才能转化为任务
2. **任务创建**: 转化时自动创建任务
3. **关联关系**: 任务关联到Wiki任务
4. **状态同步**: Wiki任务状态与任务状态同步

---

## 5. 模块关联

### 5.1 与任务系统关联

- Wiki任务可以转化为系统任务
- 任务可以关联Wiki任务（wiki_task_id）
- 任务状态与Wiki任务状态同步

### 5.2 与代码分析系统关联

- 代码文档可以关联代码分析结果
- 代码分析结果可以引用代码文档

### 5.3 与用户系统关联

- Wiki任务和代码文档的创建者都是用户
- 投票涉及用户权限

---

## 6. 详细文档链接

### 6.1 前端文档

详细的前端实现文档请参考：[代码文档系统模块 - 前端文档](../frontend/codepedia.md)

包含内容：
- 页面结构和路由
- 组件结构和说明
- Store 状态管理
- API 调用规范
- 交互流程
- UI 规范
- 权限控制

### 6.2 后端文档

详细的后端实现文档请参考：[代码文档系统模块 - 后端文档](../backend/codepedia.md)

包含内容：
- 数据模型（Model/Schema）
- API 规范（Controller/Route）
- 业务逻辑流程（Service/UseCase）
- 权限与鉴权规则
- 错误码和响应规范
- 定时任务/队列处理/事件

---

**文档版本**: v1.0  
**最后更新**: 2025-11-19  
**维护者**: GWEN开发团队
