# GWEN 系统文档

> **文档标准**: 本仓库用于存放 Gwen 项目的技术文档，包括系统架构、前后端设计说明、接口文档、开发规范以及项目流程等内容。旨在为团队成员提供统一的知识库，支持高效开发与协作。
>
> **文档分类**: 每个业务模块的文档分为三类：
> - **业务概述文档** (`modules/`): 包含业务流程、业务规则、模块关联等业务层面的说明
> - **前端文档** (`frontend/`): 包含页面结构、组件结构、Store、API调用、交互流程、UI规范、权限控制等技术实现说明
> - **后端文档** (`backend/`): 包含数据模型、API规范、业务逻辑流程、权限与鉴权规则、错误码和响应规范等技术实现说明

## 目录

- [1. 系统概述](#1-系统概述)
- [2. 核心模块](#2-核心模块)
- [3. 模块详细文档](#3-模块详细文档)
- [4. 文档结构说明](#4-文档结构说明)

---

## 1. 系统概述

### 1.1 系统定位
GWEN 是一个面向团队协作和项目管理的企业级全栈应用系统，支持任务驱动的工作流、实时协作、财务管理和多平台集成。

### 1.2 技术栈

**后端**
- 框架: Ruby on Rails 7.1.3
- 数据库: MySQL (生产) / SQLite (开发)
- 缓存/队列: Redis, Sidekiq
- 实时通信: Action Cable (WebSocket)
- 支付集成: Stripe SDK

**前端**
- 框架: Vue 3 + TypeScript
- 构建工具: Vite
- UI组件库: Ant Design Vue
- 状态管理: Pinia
- 路由: Vue Router
- 实时通信: WebSocket

### 1.3 核心特性
- ✅ 任务驱动的协作系统
- ✅ 金币激励机制
- ✅ 实时协作（WebSocket）
- ✅ 多平台集成（GitHub、GitLab等）
- ✅ 财务追踪与管理
- ✅ 支付集成（Stripe + Web3）
- ✅ 全局快捷键系统（支持任务、笔记、会议等模块）

---

## 2. 核心模块

### 2.1 模块列表

| 模块 | 描述 | 优先级 | 状态 | 业务概述 | 前端文档 | 后端文档 |
|------|------|--------|------|----------|----------|----------|
| 任务管理 | 任务创建、分配、状态流转、金币奖励 | P0 | ✅ 已实现 | [业务概述](./modules/task.md) | [前端文档](./frontend/task.md) | [后端文档](./backend/task.md) |
| 会议系统 | 会议预约、实时协作、会议笔记 | P0 | ✅ 已实现 | [业务概述](./modules/meeting.md) | [前端文档](./frontend/meeting.md) | [后端文档](./backend/meeting.md) |
| 项目管理 | 项目创建、成员管理、Issue管理 | P0 | ✅ 已实现 | [业务概述](./modules/project.md) | [前端文档](./frontend/project.md) | [后端文档](./backend/project.md) |
| 财务管理 | 会计科目、合同管理、收支统计 | P1 | ✅ 已实现 | [业务概述](./modules/financial.md) | [前端文档](./frontend/financial.md) | [后端文档](./backend/financial.md) |
| 用户权限 | 用户管理、角色权限、部门管理 | P0 | ✅ 已实现 | [业务概述](./modules/user.md) | [前端文档](./frontend/user.md) | [后端文档](./backend/user.md) |
| 支付钱包 | Stripe支付、Web3钱包、交易记录 | P1 | ✅ 已实现 | [业务概述](./modules/payment.md) | [前端文档](./frontend/payment.md) | [后端文档](./backend/payment.md) |
| 代码分析 | 代码仓库管理、分析规则、结果展示 | P2 | ✅ 已实现 | [业务概述](./modules/code_analyze.md) | [前端文档](./frontend/code_analyze.md) | [后端文档](./backend/code_analyze.md) |
| 代码文档 | 代码注释、需求提交、投票系统 | P2 | ✅ 已实现 | [业务概述](./modules/codepedia.md) | [前端文档](./frontend/codepedia.md) | [后端文档](./backend/codepedia.md) |
| 笔记系统 | 笔记管理、协作编辑、笔记分享 | P1 | ✅ 已实现 | [业务概述](./modules/note.md) | [前端文档](./frontend/note.md) | [后端文档](./backend/note.md) |

### 2.2 模块功能概述

#### 2.2.1 任务管理模块
- **核心功能**: 任务创建、分配、状态流转、金币奖励、任务树结构
- **关键特性**: 
  - 支持父子任务关系
  - 任务状态机管理
  - 悬赏任务机制
  - 金币奖励系统
- **详细文档**: [任务管理模块](./modules/task.md)

#### 2.2.2 会议系统模块
- **核心功能**: 会议预约、实时协作、会议笔记
- **关键特性**:
  - WebSocket实时通信
  - 会议参与者管理
  - 会议笔记和摘要
- **详细文档**: [会议系统模块](./modules/meeting.md)

#### 2.2.3 项目管理模块
- **核心功能**: 项目创建、成员管理、Issue管理、第三方平台集成
- **关键特性**:
  - 项目成员管理
  - Issue跟踪
  - GitHub/GitLab/Jira集成
  - 项目财务关联
- **详细文档**: [项目管理模块](./modules/project.md)

#### 2.2.4 财务管理系统
- **核心功能**: 会计科目管理、项目合同管理、收入支出记录和统计
- **关键特性**:
  - 会计科目树结构
  - 项目合同管理
  - 收支明细记录
  - 项目收支统计
- **详细文档**: [财务管理系统](./modules/financial.md)

#### 2.2.5 用户与权限系统
- **核心功能**: 用户管理、角色权限、部门管理
- **关键特性**:
  - 角色权限管理
  - 部门层级管理
  - 用户对账明细
- **详细文档**: [用户与权限系统](./modules/user.md)

#### 2.2.6 支付与钱包系统
- **核心功能**: Stripe支付、Web3钱包管理、交易记录
- **关键特性**:
  - Stripe Connect集成
  - USDC稳定币支持
  - Web3钱包管理
  - 交易记录追踪
- **详细文档**: [支付与钱包系统](./modules/payment.md)

#### 2.2.7 代码分析系统
- **核心功能**: 代码仓库管理、分析规则配置、结果展示
- **关键特性**:
  - Git/SVN仓库支持
  - 代码分析规则
  - 分析结果展示
- **详细文档**: [代码分析系统](./modules/code_analyze.md)

#### 2.2.8 代码文档系统
- **核心功能**: 代码注释、需求提交、文档管理、投票系统
- **关键特性**:
  - 代码文档管理
  - 需求提交流程
  - 投票机制
  - Wiki任务关联
- **详细文档**: [代码文档系统](./modules/codepedia.md)

#### 2.2.9 笔记系统
- **核心功能**: 笔记管理、协作编辑、笔记分享
- **关键特性**:
  - 笔记标签分类
  - 编辑锁定机制
  - 权限控制（只读/可编辑）
  - WebSocket实时同步
  - 笔记分享管理
- **详细文档**: [笔记系统](./modules/note.md)

---

## 3. 模块详细文档

所有模块的详细文档已按照新的文档标准分类组织，每个模块包含三类文档：

### 3.1 业务概述文档 (`modules/`)

业务概述文档包含业务流程、业务规则、模块关联等业务层面的说明：

- [任务管理模块 - 业务概述](./modules/task.md) - 任务创建、状态流转、金币奖励
- [会议系统模块 - 业务概述](./modules/meeting.md) - 会议预约、实时协作、任务验收
- [项目管理模块 - 业务概述](./modules/project.md) - 项目创建、Issue管理、第三方平台集成
- [财务管理系统 - 业务概述](./modules/financial.md) - 会计科目、合同管理、收支统计
- [用户与权限系统 - 业务概述](./modules/user.md) - 用户管理、角色权限、部门管理
- [支付与钱包系统 - 业务概述](./modules/payment.md) - Stripe支付、Web3钱包、交易记录
- [代码分析系统 - 业务概述](./modules/code_analyze.md) - 代码仓库管理、分析规则、结果展示
- [代码文档系统 - 业务概述](./modules/codepedia.md) - 代码注释、需求提交、投票系统
- [笔记系统 - 业务概述](./modules/note.md) - 笔记管理、协作编辑、笔记分享

### 3.2 前端文档 (`frontend/`)

前端文档包含页面结构、组件结构、Store、API调用、交互流程、UI规范、权限控制等技术实现说明：

- [任务管理模块 - 前端文档](./frontend/task.md) - 任务展示、任务操作、状态管理、实时协作
- [会议系统模块 - 前端文档](./frontend/meeting.md) - 会议预约界面、实时协作、会议笔记
- [项目管理模块 - 前端文档](./frontend/project.md) - 项目创建界面、成员管理、Issue管理
- [财务管理系统 - 前端文档](./frontend/financial.md) - 会计科目管理、合同管理、收支统计
- [用户与权限系统 - 前端文档](./frontend/user.md) - 用户管理界面、角色权限、部门管理
- [支付与钱包系统 - 前端文档](./frontend/payment.md) - Stripe支付界面、Web3钱包、交易记录
- [代码分析系统 - 前端文档](./frontend/code_analyze.md) - 代码仓库管理界面、分析规则配置、结果展示
- [代码文档系统 - 前端文档](./frontend/codepedia.md) - 代码文档管理界面、需求提交、投票系统
- [笔记系统 - 前端文档](./frontend/note.md) - 笔记管理界面、协作编辑、笔记分享
- [快捷键系统](./frontend/shortcuts.md) - 全局快捷键管理、命令面板、快捷键帮助

### 3.3 后端文档 (`backend/`)

后端文档包含数据模型、API规范、业务逻辑流程、权限与鉴权规则、错误码和响应规范等技术实现说明：

- [任务管理模块 - 后端文档](./backend/task.md) - 任务数据模型、任务API、状态流转逻辑
- [会议系统模块 - 后端文档](./backend/meeting.md) - 会议数据模型、会议API、实时协作逻辑
- [项目管理模块 - 后端文档](./backend/project.md) - 项目数据模型、项目API、Issue管理逻辑
- [财务管理系统 - 后端文档](./backend/financial.md) - 财务数据模型、财务API、收支统计逻辑
- [用户与权限系统 - 后端文档](./backend/user.md) - 用户数据模型、权限API、角色管理逻辑
- [支付与钱包系统 - 后端文档](./backend/payment.md) - 支付数据模型、支付API、交易处理逻辑
- [代码分析系统 - 后端文档](./backend/code_analyze.md) - 代码分析数据模型、分析API、分析规则逻辑
- [代码文档系统 - 后端文档](./backend/codepedia.md) - 代码文档数据模型、文档API、投票逻辑
- [笔记系统 - 后端文档](./backend/note.md) - 笔记数据模型、笔记API、协作编辑逻辑

---

## 4. 文档结构说明

### 4.1 文档分类标准

GWEN 系统的文档按照以下标准进行分类：

1. **业务概述文档** (`modules/xxx.md`)
   - 模块定位和业务价值
   - 核心业务概念
   - 业务流程说明
   - 业务规则定义
   - 模块关联关系

2. **前端文档** (`frontend/xxx.md`)
   - 模块边界与目的
   - 技术栈说明
   - 页面结构（路由、组件路径）
   - 组件结构（组件树）
   - Store 说明（状态管理）
   - API 调用规范
   - 交互流程
   - UI 规范
   - 权限控制

3. **后端文档** (`backend/xxx.md`)
   - 模块职责
   - 数据模型（Model/Schema）
   - API 规范（Controller/Route）
   - 业务逻辑流程（Service/UseCase）
   - 权限与鉴权规则
   - 错误码和响应规范
   - 定时任务/队列处理/事件

### 4.2 文档导航

每个模块文档都包含导航链接，方便在不同文档类型之间跳转：

- **业务概述文档** 包含链接到对应的前端文档和后端文档
- **前端文档** 包含链接返回到文档首页和相关文档
- **后端文档** 包含链接返回到文档首页

### 4.3 文档维护规范

- 新增模块时，需要同时创建三类文档（业务概述、前端、后端）
- 更新模块功能时，需要同步更新相关的三类文档
- 文档更新后，需要更新文档的"最后更新"时间

---

## 附录

### A. 错误码规范

```yaml
错误码定义:
  0: 成功
  400: 参数错误
  401: 未授权
  403: 权限不足
  404: 资源不存在
  500: 服务器错误
```

### B. 通用响应格式

```typescript
interface ApiResponse<T> {
  code: number
  message?: string
  data: T
}
```

### C. 分页格式

```typescript
interface Pagination {
  current_page: number
  per_page: number
  total_pages: number
  total_count: number
}
```

---

**文档版本**: v2.1  
**最后更新**: 2025-01-20  
**维护者**: GWEN开发团队
